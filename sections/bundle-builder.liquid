<style>
  /* Reset and Base Styles */
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
  }

  body {
    background-color: #fff;
    color: #333;
    line-height: 1.6;
  }

  a {
    text-decoration: none;
    color: #333;
  }

  ul {
    list-style: none;
  }

  button {
    cursor: pointer;
    border: none;
    outline: none;
  }

  /* Main Content */
  .main-content {
    display: flex;
    max-width: 1200px;
    margin: 40px auto;
    padding: 0 20px;
    gap: 30px;
  }

  .product-selection {
    flex: 7;
  }

  .cart-summary {
    flex: 3;
    background-color: #edf3ff;
    border-radius: 8px;
    padding: 20px;
  }

  /* Step Container */
  .step-container {
    margin-bottom: 18px;
    border-bottom: 1px solid #e0e0e0;
    padding: 20px;
    border-radius: 8px;
    background-color: #edf3ff;
  }

  .step-header {
    margin-bottom: 20px;
  }

  .step-number {
    color: #888;
    font-size: 12px;
    font-weight: 600;
    display: block;
    margin-bottom: 10px;
  }

  .step-title {
    display: flex;
    align-items: center;
    gap: 10px;
    justify-content: space-between;
  }

  .step-icon {
    width: 24px;
    height: 24px;
    background-color: #f0f0f0;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    color: #666;
    border: 1px solid #ddd;
  }

  .step-title h2 {
    font-size: 18px;
    font-weight: 600;
    margin-right: auto;
  }

  .selected-count {
    background-color: transparent;
    padding: 0;
    border-radius: 0;
    font-size: 16px;
    color: #4e2fd2;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .selected-count svg {
    fill: #4e2fd2;
    width: 10px;
    height: 10px;
  }

  .expand-icon {
    display: flex;
    align-items: center;
    margin-left: 4px;
  }

  .step-container.collapsed .expand-icon {
    margin-left: 4px;
  }

  /* Products Grid */
  .products-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
    margin-bottom: 20px;
  }

  .product-card {
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    padding: 15px;
    position: relative;
    background-color: #fff;
    min-width: 0;
  }

  /* Added style for highlighted product card border */
  .product-card--highlighted {
    border-color: #4e2fd2; /* Use checkout button color */
    border-width: 2px; /* Make border slightly thicker */
  }

  .discount-badge {
    position: absolute;
    top: 10px;
    left: 10px;
    background-color: #4e2fd2;
    color: white;
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 600;
  }

  .product-image {
    width: 100%;
    height: 150px;
    object-fit: contain;
    margin-bottom: 15px;
  }

  .product-card h3 {
    font-size: 16px;
    font-weight: 600;
    margin-bottom: 8px;
  }

  .product-description {
    font-size: 14px;
    color: #666;
    margin-bottom: 15px;
  }

  .learn-more {
    color: #4e2fd2;
    font-weight: 600;
    text-decoration: underline;
  }

  /* Updated Color Swatch Styles */
  .color-options {
    display: flex;
    gap: 4px;
    margin-bottom: 15px;
  }

  .color-swatch-button {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 1px 6px;
    border: 1px solid #ccc;
    border-radius: 5px;
    background-color: #fff;
    cursor: pointer;
    transition: border-color 0.3s, background-color 0.3s;
    font-size: 11px;
    text-align: left;
    line-height: 1.3;
  }

  .color-swatch-button:hover {
    border-color: #999;
  }

  .color-swatch-button.selected {
    border-color: #00bfa5;
    background-color: #e0f2f1;
    box-shadow: none;
  }

  .swatch-image {
    width: 16px;
    height: 16px;
    object-fit: contain;
    flex-shrink: 0;
  }

  .swatch-text {
    white-space: nowrap;
  }

  .quantity-price {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    gap: 4px;
  }

  /* Updated Quantity Selector Styles */
  .quantity-selector {
    display: flex;
    align-items: center;
    gap: 6px; /* Reduced gap */
    border: none;
    padding: 0;
  }

  .quantity-button {
    background-color: #f0f4fa;
    border-radius: 6px; /* Slightly smaller radius */
    width: 26px; /* Reduced width */
    height: 26px; /* Reduced height */
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    color: #555;
    font-size: 16px; /* Reduced font size */
    font-weight: normal;
    line-height: 1;
    border: none;
    padding: 0;
  }

  .quantity-button:hover {
    background-color: #e1e7f0;
  }

  .quantity-value {
    font-size: 16px; /* Reduced font size */
    font-weight: 600;
    min-width: 16px; /* Reduced min-width */
    text-align: center;
    color: #333;
  }

  .price {
    display: flex;
    justify-content: flex-end;
    align-items: baseline;
    gap: 4px;
  }

  .original-price {
    text-decoration: line-through;
    color: #dc3545;
    font-size: 16px;
    order: 1;
  }

  .sale-price {
    font-weight: 600;
    font-size: 16px;
    color: #333;
    order: 2;
  }

  .free-price {
    font-weight: 600;
    font-size: 16px;
    color: #00c853;
  }

  /* Wrapper to center the next button */
  .next-button-wrapper {
    display: flex;
    justify-content: center;
    margin-top: 20px; /* Keep the margin on the wrapper */
  }

  .next-button {
    background-color: #f5f7fa;
    color: #4e2fd2;
    padding: 8px 20px; /* Reduced vertical padding */
    border-radius: 12px;
    font-weight: 600;
    margin-top: 0; /* Removed margin from button itself */
    transition: background-color 0.3s, border-color 0.3s, color 0.3s;
    border: 2px solid #4e2fd2;
    /* width: 100%; */
    text-align: center;
    font-size: 16px;
  }

  .next-button:hover {
    background-color: #e1e7f0;
    border-color: #4527a0;
    color: #4527a0;
  }

  /* Collapsed Steps */
  .step-container.collapsed {
    padding: 4px 0; /* Vertical padding */
    background-color: transparent;
    border-bottom: 1px solid #333;
    border-radius: 0;
    margin-bottom: 9px;
  }

  .step-container.collapsed .step-header {
    margin-bottom: 0; /* Remove margin below header in collapsed state */
  }

  .step-container.collapsed .step-divider {
    margin-left: 0;
    margin-right: 0;
    width: 100%;
  }

  /* Cart Summary */
  .summary-header {
    margin-bottom: 20px;
  }

  .summary-header h2 {
    font-size: 14px;
    color: #888;
    margin-bottom: 5px;
  }

  .summary-header h3 {
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 10px;
  }

  .summary-header p {
    font-size: 14px;
    color: #666;
  }

  .summary-section {
    margin-bottom: 20px;
    border-bottom: 1px solid #e0e0e0;
    padding-bottom: 15px;
  }

  .summary-section h4 {
    font-size: 12px;
    color: #888;
    margin-bottom: 10px;
  }

  .summary-item {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
  }

  .summary-image {
    width: 40px;
    height: 40px;
    object-fit: contain;
    margin-right: 10px;
  }

  .item-details {
    flex: 1;
    margin-right: 10px;
  }

  .item-name {
    font-size: 14px;
  }

  .item-quantity {
    display: flex;
    align-items: center;
    gap: 5px;
  }

  .item-quantity button {
    background: none;
    color: #4e2fd2;
    font-size: 14px;
  }

  .item-price {
    text-align: right;
    min-width: 70px;
    margin-left: auto; /* Push price block to the right */
  }

  .cam-icon,
  .shipping-icon {
    margin-right: 5px;
    /* Add other styles like font-size or vertical-align if needed */
  }

  /* Style prices within summary to stack */
  .summary-item .item-price span {
    display: block; /* Stack prices vertically */
    line-height: 1.3; /* Adjust spacing between stacked prices */
  }

  /* Style quantity selector within summary */
  .summary-item .item-quantity {
    margin-right: 5px;
  }

  .summary-item .quantity-button {
    background-color: #fff; /* White background for summary buttons */
    border: none; /* Remove subtle border */
  }

  .summary-item .quantity-button:hover {
    background-color: #eee; /* Slightly grey on hover */
  }

  .summary-item .quantity-value {
    /* Inherits general .quantity-value styles */
  }

  /* Set specific price colors in summary */
  .summary-item .item-price .sale-price,
  .summary-item .item-price .free-price {
    color: #4e2fd2; /* Match checkout button purple */
    font-weight: 600; /* Ensure consistent weight */
  }

  .summary-item .item-price .original-price {
    color: #888; /* Keep original price grey/red if needed, default grey */
    font-size: 12px; /* Make original price smaller */
  }

  .cam-unlimited {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .cam-text {
    color: #4e2fd2;
    font-weight: 600;
  }

  .monthly-price {
    font-size: 14px;
    color: #666;
  }

  .shipping-info {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .badge-section {
    display: flex;
    justify-content: center;
    margin: 20px 0;
  }

  .badge {
    background-color: #4e2fd2;
    color: white;
    padding: 10px 15px;
    border-radius: 50px;
    font-size: 14px;
    position: relative;
  }

  .badge::before {
    content: '';
    position: absolute;
    top: -5px;
    left: -5px;
    right: -5px;
    bottom: -5px;
    border: 2px solid #4e2fd2;
    border-radius: 50px;
    opacity: 0.5;
  }

  .total-section {
    margin-top: 20px;
  }

  .total-row {
    display: flex;
    justify-content: flex-end;
    align-items: center;
    gap: 15px;
    margin-bottom: 10px;
  }

  .original-total {
    text-decoration: line-through;
    color: #888;
    font-size: 14px;
  }

  .final-total {
    font-size: 24px;
    font-weight: 700;
    color: #4e2fd2;
  }

  .savings-text {
    font-size: 10px;
    color: #00bfa5;
    text-align: center;
    margin-bottom: 10px;
    font-weight: 500;
  }

  .checkout-button {
    background-color: #4e2fd2;
    color: white;
    width: 100%;
    padding: 15px; /* Adjusted padding for height */
    border-radius: 6px; /* Reduced from 12px */
    font-weight: 600;
    margin-bottom: 10px;
    transition: background-color 0.3s;
    border: none;
    font-size: 18px;
  }

  .checkout-button:hover {
    background-color: #4527a0;
  }

  .save-later {
    display: block;
    text-align: center;
    font-size: 14px;
    color: #333;
    text-decoration: underline;
    font-style: italic;
  }

  /* Testimonials Section */
  .testimonials {
    background-color: #f0f4fa;
    padding: 60px 20px;
    text-align: center;
  }

  .testimonials h2 {
    font-size: 32px;
    font-weight: 600;
    margin-bottom: 40px;
  }

  .highlight {
    color: #00c853;
  }

  .testimonials-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 30px;
    max-width: 1200px;
    margin: 0 auto;
  }

  .testimonial-card {
    background-color: white;
    border-radius: 8px;
    padding: 25px;
    text-align: left;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
  }

  .rating {
    color: #ffc107;
    margin-bottom: 15px;
    font-size: 18px;
  }

  .testimonial-card h3 {
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 15px;
  }

  .testimonial-card p {
    font-size: 14px;
    color: #666;
    margin-bottom: 20px;
  }

  .verified-customer {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    color: #00c853;
  }

  .verified-icon {
    background-color: #00c853;
    color: white;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
  }

  /* Responsive Styles */
  @media (max-width: 1024px) {
    .main-content {
      flex-direction: column;
    }
  }

  @media (max-width: 768px) {
    .products-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (max-width: 480px) {
    .products-grid {
      grid-template-columns: 1fr;
    }

    .product-card {
      display: flex; /* Make card a flex container */
      gap: 15px; /* Add gap between image and content */
      align-items: center; /* Changed from flex-start to center */
    }

    .product-image {
      width: 40%; /* Set image width */
      height: auto; /* Adjust height automatically */
      margin-bottom: 0; /* Remove bottom margin */
      flex-shrink: 0; /* Prevent image from shrinking */
    }

    .product-card__content {
      flex: 1; /* Allow content to take remaining space */
    }

    .main-content {
      padding-left: 0; /* Remove side padding on mobile */
      padding-right: 0; /* Remove side padding on mobile */
    }

    .price {
      display: block; /* Stack prices vertically */
      text-align: right; /* Align text to the right */
      gap: 0; /* Reset gap for block layout */
    }

    .original-price,
    .sale-price {
      order: unset; /* Remove flex order for mobile */
    }

    .step-container.collapsed {
      padding-left: 20px; /* Add mobile side padding */
      padding-right: 20px; /* Add mobile side padding */
      padding-top: 4px; /* Ensure vertical padding is kept */
      padding-bottom: 4px; /* Ensure vertical padding is kept */
    }

    /* Adjust divider for new padding in collapsed steps on mobile */
    .step-container.collapsed .step-divider {
      margin-left: -20px; /* Counteract new padding */
      margin-right: -20px; /* Counteract new padding */
      width: calc(100% + 40px); /* Span the padded container */
      /* Keep reduced vertical margins */
      margin-top: 5px;
      margin-bottom: 5px;
    }

    .step-container.collapsed .step-number {
      margin-bottom: 0; /* Remove bottom margin */
    }

    /* Optional: Adjust swatch wrapping if needed */
    /* .color-options {
      flex-wrap: wrap; 
    } */
  }

  .step-divider {
    border: none; /* Remove default HR border */
    height: 1px; /* Set height */
    background-color: #333; /* Set color to near black */
    margin: 10px -20px 15px -20px; /* Use negative horizontal margins to counteract padding */
    width: calc(100% + 40px); /* Calculate width to span the container including padding */
  }

  .step-container.collapsed .step-icon {
    background-color: transparent;
    border: none;
    width: 32px;
    height: 32px;
    color: #aaa;
  }

  .step-container.collapsed .step-icon svg {
    stroke: #aaa;
  }
</style>

<bundle-builder>
  <!-- Main Content -->
  <main class="main-content">
    <div class="product-selection">
      <!-- Step 1: Now collapsible -->
      <div
        class="step-container"
        x-data="{ open: true }"
        :class="{ 'collapsed': !open }"
      >
        <div class="step-header" x-on:click="open = !open" style="cursor: pointer;">
          <span class="step-number">STEP 1 OF 4</span>
          <hr class="step-divider">
          <div class="step-title">
            <div class="step-icon">
              <!-- Replaced number 1 with camera SVG -->
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="feather feather-camera"
              >
                <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle>
              </svg>
            </div>
            <h2>Choose your cameras</h2>
            <!-- Group count and icon together -->
            <div style="display: flex; align-items: center;">
              <span class="selected-count">
                2 selected
              </span>
              <!-- Replaced expand-icon span with dynamic SVG based on 'open' state -->
              <span class="expand-icon" x-show="!open">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="12"
                  height="12"
                  viewBox="0 0 24 24"
                  fill="#4e2fd2"
                  stroke="#4e2fd2"
                  stroke-width="1"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <polygon points="12 18 6 6 18 6 12 18"></polygon> <!-- Down arrow for closed state -->
                </svg>
              </span>
              <span class="expand-icon" x-show="open">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="12"
                  height="12"
                  viewBox="0 0 24 24"
                  fill="#4e2fd2"
                  stroke="#4e2fd2"
                  stroke-width="1"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <polygon points="12 6 18 18 6 18 12 6"></polygon> <!-- Up arrow for open state -->
                </svg>
              </span>
            </div> <!-- End group -->
          </div>
        </div>

        <!-- Collapsible Content Area -->
        <div x-show="open">
          <div class="products-grid">
            <!-- Wyze Cam v4 -->
            <div class="product-card product-card--highlighted">
              <div class="discount-badge">SAVE 22%</div>
              <img src="https://placehold.co/150x150" alt="Wyze Cam v4" class="product-image" width="150" height="150">
              <div class="product-card__content">
                <h3>Wyze Cam v4</h3>
                <p class="product-description">The clearest Wyze Cam ever made. <a href="#" class="learn-more">Learn More</a></p>
                <div class="color-options">
                  <button class="color-swatch-button selected">
                    <img
                      src="https://placehold.co/24x24/ffffff/000000?text=W"
                      alt="White Wyze Cam v4"
                      class="swatch-image"
                      width="24"
                      height="24"
                    >
                    <span class="swatch-text">White</span>
                  </button>
                  <button class="color-swatch-button">
                    <img
                      src="https://placehold.co/24x24/9e9e9e/000000?text=G"
                      alt="Gray Wyze Cam v4"
                      class="swatch-image"
                      width="24"
                      height="24"
                    >
                    <span class="swatch-text">Gray</span>
                  </button>
                  <button class="color-swatch-button">
                    <img
                      src="https://placehold.co/24x24/000000/ffffff?text=B"
                      alt="Black Wyze Cam v4"
                      class="swatch-image"
                      width="24"
                      height="24"
                    >
                    <span class="swatch-text">Black</span>
                  </button>
                </div>
                <div class="quantity-price">
                  <div class="quantity-selector">
                    <button class="quantity-button quantity-down" aria-label="Decrease quantity">-</button>
                    <span class="quantity-value">1</span>
                    <button class="quantity-button quantity-up" aria-label="Increase quantity">+</button>
                  </div>
                  <div class="price">
                    <span class="original-price">$35.98</span>
                    <span class="sale-price">$27.98</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Wyze Cam Pan v3 -->
            <div class="product-card product-card--highlighted">
              <div class="discount-badge">SAVE 12%</div>
              <img src="https://placehold.co/150x150" alt="Wyze Cam Pan v3" class="product-image" width="150" height="150">
              <div class="product-card__content">
                <h3>Wyze Cam Pan v3</h3>
                <p class="product-description">360° pan and 180° tilt security camera. <a href="#" class="learn-more">Learn More</a></p>
                <div class="color-options">
                  <button class="color-swatch-button">
                    <img
                      src="https://placehold.co/24x24/ffffff/000000?text=W"
                      alt="White Wyze Cam Pan v3"
                      class="swatch-image"
                      width="24"
                      height="24"
                    >
                    <span class="swatch-text">White</span>
                  </button>
                  <button class="color-swatch-button selected">
                    <img
                      src="https://placehold.co/24x24/000000/ffffff?text=B"
                      alt="Black Wyze Cam Pan v3"
                      class="swatch-image"
                      width="24"
                      height="24"
                    >
                    <span class="swatch-text">Black</span>
                  </button>
                </div>
                <div class="quantity-price">
                  <div class="quantity-selector">
                    <button class="quantity-button quantity-down" aria-label="Decrease quantity">-</button>
                    <span class="quantity-value">2</span>
                    <button class="quantity-button quantity-up" aria-label="Increase quantity">+</button>
                  </div>
                  <div class="price">
                    <span class="original-price">$39.98</span>
                    <span class="sale-price">$34.98</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Wyze Cam Floodlight v2 -->
            <div class="product-card">
              <div class="discount-badge">SAVE 22%</div>
              <img src="https://placehold.co/150x150" alt="Wyze Cam Floodlight v2" class="product-image" width="150" height="150">
              <div class="product-card__content">
                <h3>Wyze Cam Floodlight v2</h3>
                <p class="product-description">
                  2K floodlight camera with 180° wide-angle view for your garage. <a href="#" class="learn-more">Learn More</a>
                </p>
                <div class="color-options">
                  <button class="color-swatch-button selected">
                    <img
                      src="https://placehold.co/24x24/ffffff/000000?text=W"
                      alt="White Wyze Cam Floodlight v2"
                      class="swatch-image"
                      width="24"
                      height="24"
                    >
                    <span class="swatch-text">White</span>
                  </button>
                  <button class="color-swatch-button">
                    <img
                      src="https://placehold.co/24x24/000000/ffffff?text=B"
                      alt="Black Wyze Cam Floodlight v2"
                      class="swatch-image"
                      width="24"
                      height="24"
                    >
                    <span class="swatch-text">Black</span>
                  </button>
                </div>
                <div class="quantity-price">
                  <div class="quantity-selector">
                    <button class="quantity-button quantity-down" aria-label="Decrease quantity">-</button>
                    <span class="quantity-value">0</span>
                    <button class="quantity-button quantity-up" aria-label="Increase quantity">+</button>
                  </div>
                  <div class="price">
                    <span class="original-price">$89.98</span>
                    <span class="sale-price">$69.98</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Wyze Battery Cam Pro -->
            <div class="product-card">
              <img src="https://placehold.co/150x150" alt="Wyze Battery Cam Pro" class="product-image" width="150" height="150">
              <div class="product-card__content">
                <h3>Wyze Battery Cam Pro</h3>
                <p class="product-description">
                  Protect anywhere. See everything. Up to 14mo. No power outlet or electrician needed.
                  <a href="#" class="learn-more">Learn More</a>
                </p>
                <div class="color-options">
                  <button class="color-swatch-button selected">
                    <img
                      src="https://placehold.co/24x24/ffffff/000000?text=W"
                      alt="White Wyze Battery Cam Pro"
                      class="swatch-image"
                      width="24"
                      height="24"
                    >
                    <span class="swatch-text">White</span>
                  </button>
                  <button class="color-swatch-button">
                    <img
                      src="https://placehold.co/24x24/000000/ffffff?text=B"
                      alt="Black Wyze Battery Cam Pro"
                      class="swatch-image"
                      width="24"
                      height="24"
                    >
                    <span class="swatch-text">Black</span>
                  </button>
                </div>
                <div class="quantity-price">
                  <div class="quantity-selector">
                    <button class="quantity-button quantity-down" aria-label="Decrease quantity">-</button>
                    <span class="quantity-value">0</span>
                    <button class="quantity-button quantity-up" aria-label="Increase quantity">+</button>
                  </div>
                  <div class="price">
                    <span class="sale-price">$59.98</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Wyze Duo Cam Doorbell -->
            <div class="product-card">
              <img src="https://placehold.co/150x150" alt="Wyze Duo Cam Doorbell" class="product-image" width="150" height="150">
              <div class="product-card__content">
                <h3>Wyze Duo Cam Doorbell</h3>
                <p class="product-description">
                  Two cameras. Two views. Double the porch protection. <a href="#" class="learn-more">Learn More</a>
                </p>
                <div class="quantity-price">
                  <div class="quantity-selector">
                    <button class="quantity-button quantity-down" aria-label="Decrease quantity">-</button>
                    <span class="quantity-value">0</span>
                    <button class="quantity-button quantity-up" aria-label="Increase quantity">+</button>
                  </div>
                  <div class="price">
                    <span class="sale-price">$69.98</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="next-button-wrapper">
            <button class="next-button">Next: Choose your sensors</button>
          </div>
        </div>
        <!-- End Collapsible Content Area -->
      </div>

      <!-- Step 2: Now collapsible -->
      <div
        class="step-container"
        x-data="{ open: true }"
        :class="{ 'collapsed': !open }"
      >
        <div class="step-header" x-on:click="open = !open" style="cursor: pointer;">
          <span class="step-number">STEP 2 OF 4</span>
          <hr class="step-divider">
          <div class="step-title">
            <div class="step-icon">
              <!-- Replaced number 1 with camera SVG -->
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="feather feather-camera"
              >
                <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle>
              </svg>
            </div>
            <h2>Choose your sensors</h2>
            <!-- Group count and icon together -->
            <div style="display: flex; align-items: center;">
              <span class="selected-count">
                3 selected
              </span>
              <!-- Replaced expand-icon span with dynamic SVG based on 'open' state -->
              <span class="expand-icon" x-show="!open">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="12"
                  height="12"
                  viewBox="0 0 24 24"
                  fill="#4e2fd2"
                  stroke="#4e2fd2"
                  stroke-width="1"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <polygon points="12 18 6 6 18 6 12 18"></polygon> <!-- Down arrow for closed state -->
                </svg>
              </span>
              <span class="expand-icon" x-show="open">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="12"
                  height="12"
                  viewBox="0 0 24 24"
                  fill="#4e2fd2"
                  stroke="#4e2fd2"
                  stroke-width="1"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <polygon points="12 6 18 18 6 18 12 6"></polygon> <!-- Up arrow for open state -->
                </svg>
              </span>
            </div> <!-- End group -->
          </div>
        </div>

        <!-- Collapsible Content Area -->
        <div x-show="open">
          <div class="products-grid">
            <!-- Wyze Cam v4 -->
            <div class="product-card product-card--highlighted">
              <div class="discount-badge">SAVE 22%</div>
              <img src="https://placehold.co/150x150" alt="Wyze Cam v4" class="product-image" width="150" height="150">
              <div class="product-card__content">
                <h3>Wyze Cam v4</h3>
                <p class="product-description">The clearest Wyze Cam ever made. <a href="#" class="learn-more">Learn More</a></p>
                <div class="color-options">
                  <button class="color-swatch-button selected">
                    <img
                      src="https://placehold.co/24x24/ffffff/000000?text=W"
                      alt="White Wyze Cam v4"
                      class="swatch-image"
                      width="24"
                      height="24"
                    >
                    <span class="swatch-text">White</span>
                  </button>
                  <button class="color-swatch-button">
                    <img
                      src="https://placehold.co/24x24/9e9e9e/000000?text=G"
                      alt="Gray Wyze Cam v4"
                      class="swatch-image"
                      width="24"
                      height="24"
                    >
                    <span class="swatch-text">Gray</span>
                  </button>
                  <button class="color-swatch-button">
                    <img
                      src="https://placehold.co/24x24/000000/ffffff?text=B"
                      alt="Black Wyze Cam v4"
                      class="swatch-image"
                      width="24"
                      height="24"
                    >
                    <span class="swatch-text">Black</span>
                  </button>
                </div>
                <div class="quantity-price">
                  <div class="quantity-selector">
                    <button class="quantity-button quantity-down" aria-label="Decrease quantity">-</button>
                    <span class="quantity-value">1</span>
                    <button class="quantity-button quantity-up" aria-label="Increase quantity">+</button>
                  </div>
                  <div class="price">
                    <span class="original-price">$35.98</span>
                    <span class="sale-price">$27.98</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Wyze Cam Pan v3 -->
            <div class="product-card product-card--highlighted">
              <div class="discount-badge">SAVE 12%</div>
              <img src="https://placehold.co/150x150" alt="Wyze Cam Pan v3" class="product-image" width="150" height="150">
              <div class="product-card__content">
                <h3>Wyze Cam Pan v3</h3>
                <p class="product-description">360° pan and 180° tilt security camera. <a href="#" class="learn-more">Learn More</a></p>
                <div class="color-options">
                  <button class="color-swatch-button">
                    <img
                      src="https://placehold.co/24x24/ffffff/000000?text=W"
                      alt="White Wyze Cam Pan v3"
                      class="swatch-image"
                      width="24"
                      height="24"
                    >
                    <span class="swatch-text">White</span>
                  </button>
                  <button class="color-swatch-button selected">
                    <img
                      src="https://placehold.co/24x24/000000/ffffff?text=B"
                      alt="Black Wyze Cam Pan v3"
                      class="swatch-image"
                      width="24"
                      height="24"
                    >
                    <span class="swatch-text">Black</span>
                  </button>
                </div>
                <div class="quantity-price">
                  <div class="quantity-selector">
                    <button class="quantity-button quantity-down" aria-label="Decrease quantity">-</button>
                    <span class="quantity-value">2</span>
                    <button class="quantity-button quantity-up" aria-label="Increase quantity">+</button>
                  </div>
                  <div class="price">
                    <span class="original-price">$39.98</span>
                    <span class="sale-price">$34.98</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Wyze Cam Floodlight v2 -->
            <div class="product-card">
              <div class="discount-badge">SAVE 22%</div>
              <img src="https://placehold.co/150x150" alt="Wyze Cam Floodlight v2" class="product-image" width="150" height="150">
              <div class="product-card__content">
                <h3>Wyze Cam Floodlight v2</h3>
                <p class="product-description">
                  2K floodlight camera with 180° wide-angle view for your garage. <a href="#" class="learn-more">Learn More</a>
                </p>
                <div class="color-options">
                  <button class="color-swatch-button selected">
                    <img
                      src="https://placehold.co/24x24/ffffff/000000?text=W"
                      alt="White Wyze Cam Floodlight v2"
                      class="swatch-image"
                      width="24"
                      height="24"
                    >
                    <span class="swatch-text">White</span>
                  </button>
                  <button class="color-swatch-button">
                    <img
                      src="https://placehold.co/24x24/000000/ffffff?text=B"
                      alt="Black Wyze Cam Floodlight v2"
                      class="swatch-image"
                      width="24"
                      height="24"
                    >
                    <span class="swatch-text">Black</span>
                  </button>
                </div>
                <div class="quantity-price">
                  <div class="quantity-selector">
                    <button class="quantity-button quantity-down" aria-label="Decrease quantity">-</button>
                    <span class="quantity-value">0</span>
                    <button class="quantity-button quantity-up" aria-label="Increase quantity">+</button>
                  </div>
                  <div class="price">
                    <span class="original-price">$89.98</span>
                    <span class="sale-price">$69.98</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Wyze Battery Cam Pro -->
            <div class="product-card">
              <img src="https://placehold.co/150x150" alt="Wyze Battery Cam Pro" class="product-image" width="150" height="150">
              <div class="product-card__content">
                <h3>Wyze Battery Cam Pro</h3>
                <p class="product-description">
                  Protect anywhere. See everything. Up to 14mo. No power outlet or electrician needed.
                  <a href="#" class="learn-more">Learn More</a>
                </p>
                <div class="color-options">
                  <button class="color-swatch-button selected">
                    <img
                      src="https://placehold.co/24x24/ffffff/000000?text=W"
                      alt="White Wyze Battery Cam Pro"
                      class="swatch-image"
                      width="24"
                      height="24"
                    >
                    <span class="swatch-text">White</span>
                  </button>
                  <button class="color-swatch-button">
                    <img
                      src="https://placehold.co/24x24/000000/ffffff?text=B"
                      alt="Black Wyze Battery Cam Pro"
                      class="swatch-image"
                      width="24"
                      height="24"
                    >
                    <span class="swatch-text">Black</span>
                  </button>
                </div>
                <div class="quantity-price">
                  <div class="quantity-selector">
                    <button class="quantity-button quantity-down" aria-label="Decrease quantity">-</button>
                    <span class="quantity-value">0</span>
                    <button class="quantity-button quantity-up" aria-label="Increase quantity">+</button>
                  </div>
                  <div class="price">
                    <span class="sale-price">$59.98</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Wyze Duo Cam Doorbell -->
            <div class="product-card">
              <img src="https://placehold.co/150x150" alt="Wyze Duo Cam Doorbell" class="product-image" width="150" height="150">
              <div class="product-card__content">
                <h3>Wyze Duo Cam Doorbell</h3>
                <p class="product-description">
                  Two cameras. Two views. Double the porch protection. <a href="#" class="learn-more">Learn More</a>
                </p>
                <div class="quantity-price">
                  <div class="quantity-selector">
                    <button class="quantity-button quantity-down" aria-label="Decrease quantity">-</button>
                    <span class="quantity-value">0</span>
                    <button class="quantity-button quantity-up" aria-label="Increase quantity">+</button>
                  </div>
                  <div class="price">
                    <span class="sale-price">$69.98</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="next-button-wrapper">
            <button class="next-button">Next: Choose Accessories</button>
          </div>
        </div>
        <!-- End Collapsible Content Area -->
      </div>

      <!-- Step 3: Now collapsible -->
      <div
        class="step-container"
        x-data="{ open: true }"
        :class="{ 'collapsed': !open }"
      >
        <div class="step-header" x-on:click="open = !open" style="cursor: pointer;">
          <span class="step-number">STEP 3 OF 4</span>
          <hr class="step-divider">
          <div class="step-title">
            <div class="step-icon">
              <!-- Replaced number 1 with camera SVG -->
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="feather feather-camera"
              >
                <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle>
              </svg>
            </div>
            <h2>Choose your accessories</h2>
            <!-- Group count and icon together -->
            <div style="display: flex; align-items: center;">
              <span class="selected-count">
                1 selected
              </span>
              <!-- Replaced expand-icon span with dynamic SVG based on 'open' state -->
              <span class="expand-icon" x-show="!open">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="12"
                  height="12"
                  viewBox="0 0 24 24"
                  fill="#4e2fd2"
                  stroke="#4e2fd2"
                  stroke-width="1"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <polygon points="12 18 6 6 18 6 12 18"></polygon> <!-- Down arrow for closed state -->
                </svg>
              </span>
              <span class="expand-icon" x-show="open">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="12"
                  height="12"
                  viewBox="0 0 24 24"
                  fill="#4e2fd2"
                  stroke="#4e2fd2"
                  stroke-width="1"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <polygon points="12 6 18 18 6 18 12 6"></polygon> <!-- Up arrow for open state -->
                </svg>
              </span>
            </div> <!-- End group -->
          </div>
        </div>

        <!-- Collapsible Content Area -->
        <div x-show="open">
          <div class="products-grid">
            <!-- Wyze Cam v4 -->
            <div class="product-card product-card--highlighted">
              <div class="discount-badge">SAVE 22%</div>
              <img src="https://placehold.co/150x150" alt="Wyze Cam v4" class="product-image" width="150" height="150">
              <div class="product-card__content">
                <h3>Wyze Cam v4</h3>
                <p class="product-description">The clearest Wyze Cam ever made. <a href="#" class="learn-more">Learn More</a></p>
                <div class="color-options">
                  <button class="color-swatch-button selected">
                    <img
                      src="https://placehold.co/24x24/ffffff/000000?text=W"
                      alt="White Wyze Cam v4"
                      class="swatch-image"
                      width="24"
                      height="24"
                    >
                    <span class="swatch-text">White</span>
                  </button>
                  <button class="color-swatch-button">
                    <img
                      src="https://placehold.co/24x24/9e9e9e/000000?text=G"
                      alt="Gray Wyze Cam v4"
                      class="swatch-image"
                      width="24"
                      height="24"
                    >
                    <span class="swatch-text">Gray</span>
                  </button>
                  <button class="color-swatch-button">
                    <img
                      src="https://placehold.co/24x24/000000/ffffff?text=B"
                      alt="Black Wyze Cam v4"
                      class="swatch-image"
                      width="24"
                      height="24"
                    >
                    <span class="swatch-text">Black</span>
                  </button>
                </div>
                <div class="quantity-price">
                  <div class="quantity-selector">
                    <button class="quantity-button quantity-down" aria-label="Decrease quantity">-</button>
                    <span class="quantity-value">1</span>
                    <button class="quantity-button quantity-up" aria-label="Increase quantity">+</button>
                  </div>
                  <div class="price">
                    <span class="original-price">$35.98</span>
                    <span class="sale-price">$27.98</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Wyze Cam Pan v3 -->
            <div class="product-card product-card--highlighted">
              <div class="discount-badge">SAVE 12%</div>
              <img src="https://placehold.co/150x150" alt="Wyze Cam Pan v3" class="product-image" width="150" height="150">
              <div class="product-card__content">
                <h3>Wyze Cam Pan v3</h3>
                <p class="product-description">360° pan and 180° tilt security camera. <a href="#" class="learn-more">Learn More</a></p>
                <div class="color-options">
                  <button class="color-swatch-button">
                    <img
                      src="https://placehold.co/24x24/ffffff/000000?text=W"
                      alt="White Wyze Cam Pan v3"
                      class="swatch-image"
                      width="24"
                      height="24"
                    >
                    <span class="swatch-text">White</span>
                  </button>
                  <button class="color-swatch-button selected">
                    <img
                      src="https://placehold.co/24x24/000000/ffffff?text=B"
                      alt="Black Wyze Cam Pan v3"
                      class="swatch-image"
                      width="24"
                      height="24"
                    >
                    <span class="swatch-text">Black</span>
                  </button>
                </div>
                <div class="quantity-price">
                  <div class="quantity-selector">
                    <button class="quantity-button quantity-down" aria-label="Decrease quantity">-</button>
                    <span class="quantity-value">2</span>
                    <button class="quantity-button quantity-up" aria-label="Increase quantity">+</button>
                  </div>
                  <div class="price">
                    <span class="original-price">$39.98</span>
                    <span class="sale-price">$34.98</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Wyze Cam Floodlight v2 -->
            <div class="product-card">
              <div class="discount-badge">SAVE 22%</div>
              <img src="https://placehold.co/150x150" alt="Wyze Cam Floodlight v2" class="product-image" width="150" height="150">
              <div class="product-card__content">
                <h3>Wyze Cam Floodlight v2</h3>
                <p class="product-description">
                  2K floodlight camera with 180° wide-angle view for your garage. <a href="#" class="learn-more">Learn More</a>
                </p>
                <div class="color-options">
                  <button class="color-swatch-button selected">
                    <img
                      src="https://placehold.co/24x24/ffffff/000000?text=W"
                      alt="White Wyze Cam Floodlight v2"
                      class="swatch-image"
                      width="24"
                      height="24"
                    >
                    <span class="swatch-text">White</span>
                  </button>
                  <button class="color-swatch-button">
                    <img
                      src="https://placehold.co/24x24/000000/ffffff?text=B"
                      alt="Black Wyze Cam Floodlight v2"
                      class="swatch-image"
                      width="24"
                      height="24"
                    >
                    <span class="swatch-text">Black</span>
                  </button>
                </div>
                <div class="quantity-price">
                  <div class="quantity-selector">
                    <button class="quantity-button quantity-down" aria-label="Decrease quantity">-</button>
                    <span class="quantity-value">0</span>
                    <button class="quantity-button quantity-up" aria-label="Increase quantity">+</button>
                  </div>
                  <div class="price">
                    <span class="original-price">$89.98</span>
                    <span class="sale-price">$69.98</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Wyze Battery Cam Pro -->
            <div class="product-card">
              <img src="https://placehold.co/150x150" alt="Wyze Battery Cam Pro" class="product-image" width="150" height="150">
              <div class="product-card__content">
                <h3>Wyze Battery Cam Pro</h3>
                <p class="product-description">
                  Protect anywhere. See everything. Up to 14mo. No power outlet or electrician needed.
                  <a href="#" class="learn-more">Learn More</a>
                </p>
                <div class="color-options">
                  <button class="color-swatch-button selected">
                    <img
                      src="https://placehold.co/24x24/ffffff/000000?text=W"
                      alt="White Wyze Battery Cam Pro"
                      class="swatch-image"
                      width="24"
                      height="24"
                    >
                    <span class="swatch-text">White</span>
                  </button>
                  <button class="color-swatch-button">
                    <img
                      src="https://placehold.co/24x24/000000/ffffff?text=B"
                      alt="Black Wyze Battery Cam Pro"
                      class="swatch-image"
                      width="24"
                      height="24"
                    >
                    <span class="swatch-text">Black</span>
                  </button>
                </div>
                <div class="quantity-price">
                  <div class="quantity-selector">
                    <button class="quantity-button quantity-down" aria-label="Decrease quantity">-</button>
                    <span class="quantity-value">0</span>
                    <button class="quantity-button quantity-up" aria-label="Increase quantity">+</button>
                  </div>
                  <div class="price">
                    <span class="sale-price">$59.98</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Wyze Duo Cam Doorbell -->
            <div class="product-card">
              <img src="https://placehold.co/150x150" alt="Wyze Duo Cam Doorbell" class="product-image" width="150" height="150">
              <div class="product-card__content">
                <h3>Wyze Duo Cam Doorbell</h3>
                <p class="product-description">
                  Two cameras. Two views. Double the porch protection. <a href="#" class="learn-more">Learn More</a>
                </p>
                <div class="quantity-price">
                  <div class="quantity-selector">
                    <button class="quantity-button quantity-down" aria-label="Decrease quantity">-</button>
                    <span class="quantity-value">0</span>
                    <button class="quantity-button quantity-up" aria-label="Increase quantity">+</button>
                  </div>
                  <div class="price">
                    <span class="sale-price">$69.98</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="next-button-wrapper">
            <button class="next-button">Next: Add Extra Protection</button>
          </div>
        </div>
        <!-- End Collapsible Content Area -->
      </div>

      <!-- Step 4: Left as non-collapsible for now, kept original collapsed class -->
      <div class="step-container collapsed">
        <div class="step-header">
          <span class="step-number">STEP 4 OF 4</span>
          <hr class="step-divider">
          <div class="step-title">
            <div class="step-icon">
              <!-- Replaced number 4 with shield SVG -->
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="feather feather-shield"
              >
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
              </svg>
            </div>
            <h2>Add extra protection</h2>
            <span class="expand-icon">
              <!-- Replaced text with SVG -->
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="12"
                height="12"
                viewBox="0 0 24 24"
                fill="#4e2fd2"
                stroke="#4e2fd2"
                stroke-width="1"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <polygon points="12 18 6 6 18 6 12 18"></polygon>
              </svg>
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- Cart Summary -->
    <div class="cart-summary">
      <div class="summary-header">
        <h2>REVIEW</h2>
        <h3>Your security system</h3>
        <p>Review your personalized protection system designed to keep what matters most safe.</p>
      </div>

      <div class="summary-section">
        <h4>CAMERAS</h4>
        <div class="summary-item">
          <img src="https://placehold.co/40x40" alt="Wyze Cam v4" class="summary-image" width="40" height="40">
          <div class="item-details">
            <span class="item-name">Wyze Cam v4</span>
          </div>
          <div class="item-quantity">
            <button class="quantity-button quantity-down" aria-label="Decrease quantity">-</button>
            <span class="quantity-value">1</span>
            <button class="quantity-button quantity-up" aria-label="Increase quantity">+</button>
          </div>
          <div class="item-price">
            <span class="original-price">$35.98</span>
            <span class="sale-price">$27.98</span>
          </div>
        </div>

        <div class="summary-item">
          <img src="https://placehold.co/40x40" alt="Wyze Cam Pan v3" class="summary-image" width="40" height="40">
          <div class="item-details">
            <span class="item-name">Wyze Cam Pan v3</span>
          </div>
          <div class="item-quantity">
            <button class="quantity-button quantity-down" aria-label="Decrease quantity">-</button>
            <span class="quantity-value">2</span>
            <button class="quantity-button quantity-up" aria-label="Increase quantity">+</button>
          </div>
          <div class="item-price">
            <span class="original-price">$39.98</span>
            <span class="sale-price">$34.98</span>
          </div>
        </div>
      </div>

      <div class="summary-section">
        <h4>SENSORS</h4>
        <div class="summary-item">
          <img src="https://placehold.co/40x40" alt="Wyze Sense Motion Sensor" class="summary-image" width="40" height="40">
          <div class="item-details">
            <span class="item-name">Wyze Sense Motion Sensor</span>
          </div>
          <div class="item-quantity">
            <button class="quantity-button quantity-down" aria-label="Decrease quantity">-</button>
            <span class="quantity-value">2</span>
            <button class="quantity-button quantity-up" aria-label="Increase quantity">+</button>
          </div>
          <div class="item-price">
            <span class="sale-price">$9.98</span>
          </div>
        </div>

        <div class="summary-item">
          <img src="https://placehold.co/40x40" alt="Wyze Sense Hub" class="summary-image" width="40" height="40">
          <div class="item-details">
            <span class="item-name">Wyze Sense Hub (Required)</span>
          </div>
          <div class="item-quantity">
            <button class="quantity-button quantity-down" aria-label="Decrease quantity">-</button>
            <span class="quantity-value">1</span>
            <button class="quantity-button quantity-up" aria-label="Increase quantity">+</button>
          </div>
          <div class="item-price">
            <span class="original-price">$29.99</span>
            <span class="free-price">FREE</span>
          </div>
        </div>
      </div>

      <div class="summary-section">
        <h4>ACCESSORIES</h4>
        <div class="summary-item">
          <img src="https://placehold.co/40x40" alt="Wyze MicroSD Card" class="summary-image" width="40" height="40">
          <div class="item-details">
            <span class="item-name">Wyze MicroSD Card (32GB)</span>
          </div>
          <div class="item-quantity">
            <button class="quantity-button quantity-down" aria-label="Decrease quantity">-</button>
            <span class="quantity-value">2</span>
            <button class="quantity-button quantity-up" aria-label="Increase quantity">+</button>
          </div>
          <div class="item-price">
            <span class="sale-price">$14.98</span>
          </div>
        </div>
      </div>

      <div class="summary-section">
        <h4>PLAN</h4>
        <div class="summary-item">
          <div class="item-details">
            <span class="cam-icon">📷</span>
            <span class="item-name">Cam Unlimited</span>
          </div>
          <div class="item-price">
            <span class="original-price">$19.99/mo</span>
            <span class="sale-price">$9.99/mo</span>
          </div>
        </div>
      </div>

      <div class="summary-section">
        <h4>SHIPPING</h4>
        <div class="summary-item">
          <div class="item-details">
            <span class="shipping-icon">🚚</span>
            <span class="item-name">Fast Shipping</span>
          </div>
          <div class="item-price">
            <span class="original-price">$5.99</span>
            <span class="free-price">FREE</span>
          </div>
        </div>
      </div>

      <div class="total-section">
        <div class="total-row">
          <span class="original-total">$235.85</span>
          <span class="final-total">$187.89</span>
        </div>
        <p class="savings-text">Congrats! You're saving $50.92 on your security bundle!</p>
        <button class="checkout-button">Checkout</button>
        <a href="#" class="save-later">Save my system for later</a>
      </div>
    </div>
  </main>
</bundle-builder>
<!-- Testimonials Section -->
<section class="testimonials">
  <h2>Join over 10 million <span class="highlight">protected homes</span></h2>

  <div class="testimonials-grid">
    <div class="testimonial-card">
      <div class="rating">★★★★★</div>
      <h3>Amazing Quality – Bought Multiple!</h3>
      <p>
        "The WYZE Cam v4, 2.5K HD is fantastic! The picture quality is clear, and the setup is quick and easy. After my first purchase, I
        was so impressed that I ended up buying multiple. Excellent image clarity, high resolution is sharp, and the motion detection works
        reliably. It's a great value for the price, and I highly recommend it to anyone looking for an affordable yet high-quality security
        camera."
      </p>
      <div class="verified-customer">
        <span class="verified-icon">✓</span>
        <span>Verified Customer</span>
      </div>
    </div>

    <div class="testimonial-card">
      <div class="rating">★★★★★</div>
      <h3>LOVE THIS! ABSOLUTELY BEST BARN CAMERA EVER!</h3>
      <p>
        "Absolutely love this camera, for the money it is a fantastic buy. I got this camera to replace a camera in my barn used while our
        goats are kidding. This one is the same price as when I bought my old one yet it has much better clarity than my old ones."
      </p>
      <div class="verified-customer">
        <span class="verified-icon">✓</span>
        <span>Verified Customer</span>
      </div>
    </div>

    <div class="testimonial-card">
      <div class="rating">★★★★★</div>
      <h3>The Outdoor Watchdog</h3>
      <p>
        "The WYZE Cam v4 is my eyes on the backyard, but it feels like a lot more than that. I set it up outdoors to monitor our dogs when
        they're out. It's clear in daylight, raccoons at dusk, a dramatic show of lightning, and a bird over some seed. The spotlight kicks
        on like it's saying 'I see you folks!' Installing it outdoors was a breeze."
      </p>
      <div class="verified-customer">
        <span class="verified-icon">✓</span>
        <span>Verified Customer</span>
      </div>
    </div>
  </div>
</section>
<script>
  class BundleBuilder extends HTMLElement {
    constructor() {
      super();
      this.addEventListener('click', this.handleSwatchClick.bind(this));
    }

    connectedCallback() {
      // Initial setup if needed, event listener is already attached in constructor
    }

    handleSwatchClick(event) {
      const clickedButton = event.target.closest('.color-swatch-button');

      if (!clickedButton) {
        return; // Exit if the click wasn't on a swatch button or its children
      }

      const colorOptionsContainer = clickedButton.closest('.color-options');
      if (!colorOptionsContainer) {
        return; // Exit if somehow the button is not in a container
      }

      // Find all swatch buttons within the same container
      const siblingSwatches = colorOptionsContainer.querySelectorAll('.color-swatch-button');

      // Remove 'selected' class from all siblings
      siblingSwatches.forEach((swatch) => {
        swatch.classList.remove('selected');
      });

      // Add 'selected' class to the clicked button
      clickedButton.classList.add('selected');

      // Optional: Add logic here to update product image or variant ID based on selection
      // const selectedColor = clickedButton.querySelector('.swatch-text').textContent;
      // console.log(`Selected color: ${selectedColor}`);
    }
  }

  customElements.define('bundle-builder', BundleBuilder);
</script>

{% schema %}
{
  "name": "Bundle Builder",
  "settings": []
}
{% endschema %}
